(function(c,a,e){var b={exports:{}};function d(g){g=g||{guess:true};var h=g.e||null,j=!!g.guess;var i=new d.implementation(),f=i.run(h);return(j)?i.guessAnonymousFunctions(f):f;}d.implementation=function(){};d.implementation.prototype={run:function(f,g){f=f||this.createException();g=g||this.mode(f);if(g==="other"){return this.other(arguments.callee);}else{return this[g](f);}},createException:function(){try{this.undef();}catch(f){return f;}},mode:function(f){if(f["arguments"]&&f.stack){return"chrome";}else{if(typeof f.message==="string"&&typeof c!=="undefined"&&c.opera){if(!f.stacktrace){return"opera9";}if(f.message.indexOf("\n")>-1&&f.message.split("\n").length>f.stacktrace.split("\n").length){return"opera9";}if(!f.stack){return"opera10a";}if(f.stacktrace.indexOf("called from line")<0){return"opera10b";}return"opera11";}else{if(f.stack){return"firefox";}}}return"other";},instrumentFunction:function(g,i,j){g=g||c;var f=g[i];g[i]=function h(){j.call(this,d().slice(4));return g[i]._instrumented.apply(this,arguments);};g[i]._instrumented=f;},deinstrumentFunction:function(f,g){if(f[g].constructor===Function&&f[g]._instrumented&&f[g]._instrumented.constructor===Function){f[g]=f[g]._instrumented;}},chrome:function(g){var f=(g.stack+"\n").replace(/^\S[^\(]+?[\n$]/gm,"").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}()@$1$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}()@$1").split("\n");f.pop();return f;},firefox:function(f){return f.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split("\n");},opera11:function(l){var f="{anonymous}",m=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/;var o=l.stacktrace.split("\n"),p=[];for(var h=0,k=o.length;h<k;h+=2){var j=m.exec(o[h]);if(j){var n=j[4]+":"+j[1]+":"+j[2];var g=j[3]||"global code";g=g.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,f);p.push(g+"@"+n+" -- "+o[h+1].replace(/^\s+/,""));}}return p;},opera10b:function(m){var l=/^(.*)@(.+):(\d+)$/;var h=m.stacktrace.split("\n"),g=[];for(var k=0,f=h.length;k<f;k++){var j=l.exec(h[k]);if(j){var n=j[1]?(j[1]+"()"):"global code";g.push(n+"@"+j[2]+":"+j[3]);}}return g;},opera10a:function(l){var f="{anonymous}",m=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i;var n=l.stacktrace.split("\n"),o=[];for(var h=0,k=n.length;h<k;h+=2){var j=m.exec(n[h]);if(j){var g=j[3]||f;o.push(g+"()@"+j[2]+":"+j[1]+" -- "+n[h+1].replace(/^\s+/,""));}}return o;},opera9:function(n){var j="{anonymous}",m=/Line (\d+).*script (?:in )?(\S+)/i;var h=n.message.split("\n"),g=[];for(var l=2,f=h.length;l<f;l+=2){var k=m.exec(h[l]);if(k){g.push(j+"()@"+k[2]+":"+k[1]+" -- "+h[l+1].replace(/^\s+/,""));}}return g;},other:function(l){var g="{anonymous}",k=/function\s*([\w\-$]+)?\s*\(/i,f=[],i,h,j=10;while(l&&l["arguments"]&&f.length<j){i=k.test(l.toString())?RegExp.$1||g:g;h=Array.prototype.slice.call(l["arguments"]||[]);f[f.length]=i+"("+this.stringifyArguments(h)+")";l=l.caller;}return f;},stringifyArguments:function(h){var g=[];var k=Array.prototype.slice;for(var j=0;j<h.length;++j){var f=h[j];if(f===e){g[j]="undefined";}else{if(f===null){g[j]="null";}else{if(f.constructor){if(f.constructor===Array){if(f.length<3){g[j]="["+this.stringifyArguments(f)+"]";}else{g[j]="["+this.stringifyArguments(k.call(f,0,1))+"..."+this.stringifyArguments(k.call(f,-1))+"]";}}else{if(f.constructor===Object){g[j]="#object";}else{if(f.constructor===Function){g[j]="#function";}else{if(f.constructor===String){g[j]='"'+f+'"';}else{if(f.constructor===Number){g[j]=f;}}}}}}}}}return g.join(",");},sourceCache:{},ajax:function(f){var g=this.createXMLHTTPObject();if(g){try{g.open("GET",f,false);g.send(null);return g.responseText;}catch(h){}}return"";},createXMLHTTPObject:function(){var h,f=[function(){return new XMLHttpRequest();},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Msxml3.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");}];for(var g=0;g<f.length;g++){try{h=f[g]();this.createXMLHTTPObject=f[g];return h;}catch(j){}}},isSameDomain:function(f){return typeof location!=="undefined"&&f.indexOf(location.hostname)!==-1;},getSource:function(f){if(!(f in this.sourceCache)){this.sourceCache[f]=this.ajax(f).split("\n");}return this.sourceCache[f];},guessAnonymousFunctions:function(q){for(var n=0;n<q.length;++n){var l=/\{anonymous\}\(.*\)@(.*)/,r=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,g=q[n],h=l.exec(g);if(h){var k=r.exec(h[1]);if(k){var j=k[1],f=k[2],p=k[3]||0;if(j&&this.isSameDomain(j)&&f){var o=this.guessAnonymousFunction(j,f,p);q[n]=g.replace("{anonymous}",o);}}}}return q;},guessAnonymousFunction:function(h,j,f){var g;try{g=this.findFunctionName(this.getSource(h),j);}catch(i){g="getSource failed with url: "+h+", exception: "+i.toString();}return g;},findFunctionName:function(f,k){var n=/function\s+([^(]*?)\s*\(([^)]*)\)/;var q=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*function\b/;var o=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*(?:eval|new Function)\b/;var g="",r,p=Math.min(k,20),j,h;for(var l=0;l<p;++l){r=f[k-l-1];h=r.indexOf("//");if(h>=0){r=r.substr(0,h);}if(r){g=r+g;j=q.exec(g);if(j&&j[1]){return j[1];}j=n.exec(g);if(j&&j[1]){return j[1];}j=o.exec(g);if(j&&j[1]){return j[1];}}}return"(?)";}};(function(g){g.cache={};g.render=function(i,h){if(!g.cache[i]){g.cache[i]=g.compile(i);}return g.cache[i](h);};g.compile=function(l){if(l instanceof Function){return l;}l=(l||"")+"";l=l.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"");l=l.replace(/(\\*){![\s\S]*?!}/g,function(n,i){if(i){return n.replace("\\\\","");}return"";});var h=[],m;l=l.replace(/(\\*){(?:([\w_.]+)|>([\w_.]+)|for +([\w_]+) +in +([\w_.]+)|if +(not +|)([\w_.]+)|\/(for|if))}/g,function(q,x,u,r,v,t,o,i,p,n,w){if(x){return q.replace("\\\\","");}if(u){if(u=="else"){m=h[h.length-1];if(m&&!m.elsed){m.elsed=true;if(m.statement=="if"){return"'}else{b+='";}if(m.statement=="for"){return"'}if(!g(c,'"+m.key+"')){b+='";}}console.warn("extra {else} ignored");return"";}return"'+g(c,'"+u+"')+'";}if(r){return"'+r(g(c,'"+r+"'),c)+'";}if(t){h.push({statement:"for",key:t});return"';var "+v+"A=g(c,'"+t+"');for(var "+v+"I=0;"+v+"I<"+v+"A.length;"+v+"I++){c['"+v+"']="+v+"A["+v+"I];b+='";}if(i){h.push({statement:"if"});return"';if("+(o?"!":"")+"g(c,'"+i+"')){b+='";}if(p){m=h[h.length-1];if(m&&m.statement==p){h.pop();return"'}b+='";}console.warn("extra {/"+p+"} ignored");return"";}return q;});for(var j=h.length-1;j>-1;j--){m=h[j];console.warn("extra {"+m.statement+"} closed at end of template");l=l+"'}b+='";}var k=new Function("g","r","return function(c){var b='"+l+"';return b}");return k(f,g.render);};function f(l,k){var h=k.split(".");for(var j=0;j<h.length;j++){if(!l){return"";}l=l[h[j]];}return l||"";}g.__express=function(){try{return require("./__express");}catch(h){}}();}(typeof b=="object"?b.exports:c.whiskers={}));(function(){var h='<?xml version="1.0" encoding="UTF-8"?><notice version="2.0"><api-key>{key}</api-key><notifier><name>airbrake_js</name><version>0.1.0</version><url>http://airbrake.io</url></notifier><error><class>{exception_class}</class><message>{exception_message}</message><backtrace>{backtrace_lines}</backtrace></error><request><url>{request_url}</url><component>{request_component}</component><action>{request_action}</action>{request}</request><server-environment><project-root>{project_root}</project-root><environment-name>{environment}</environment-name></server-environment></notice>',g=b.exports,f,j;j={merge:(function(){function k(m,l,n){if(n.hasOwnProperty(m)){l[m]=n[m];}}return function(){var n=Array.prototype.slice.call(arguments),o,m,l={};while(o=n.shift()){if(typeof o!=="object"){continue;}for(m in o){k(m,l,o);}}return l;};})(),escape:function(k){return k.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/'/g,"&#39;").replace(/"/g,"&#34;");},trim:function(k){return k.toString().replace(/^\s+/,"").replace(/\s+$/,"");},renderXML:g.compile(h)};f=c.Airbrake=c.Hoptoad={xmlData:{environment:"environment"},options:{host:"airbrake.io",errorDefaults:{}},setEnvironment:function(k){this.xmlData.environment=k;},setKey:function(k){this.xmlData.key=k;},setHost:function(k){this.options.host=k;},setErrorDefaults:function(k){this.options.errorDefaults=k;}};function i(){this.options=j.merge({},f.options);this.xmlData=j.merge({},f.xmlData);}i.prototype={constructor:i,VERSION:"0.1.0",ROOT:c.location.protocol+"//"+c.location.host,BACKTRACE_MATCHER:/^(.*)\@(.*)\:(\d+)$/,backtrace_filters:[/notifier\.js/],notify:function(m){var l=escape(this.generateXML(m)),k="//"+this.options.host+"/notifier_api/v2/notices?data="+l,n=a.createElement("iframe");n.style.display="none";n.src=k;n.onload=function(){a.body.removeChild(n);};a.body.appendChild(n);},generateXML:function(k){var r=this.xmlData,m,p,l,q,o=j.merge(this.options.errorDefaults,k),n=j.trim(j.escape(o.component||""));r.request="";r.request_url=j.escape((o.url||"")+location.hash);if(!j.trim(r.request_url)&&!n){r.request="";}else{m=o["cgi-data"]||{};m.HTTP_USER_AGENT=navigator.userAgent;r.request+="<cgi-data>"+this.generateVariables(m)+"</cgi-data>";l=["params","session"];for(p=0;p<l.length;p++){q=l[p];if(o[q]){r.request+="<"+q+">"+this.generateVariables(o[q])+"</"+q+">";}}r.request_url=j.escape((o.url||"")+location.hash);r.request_action=j.escape(o.action||"");r.request_component=n;}r.project_root=this.ROOT;r.exception_class=j.escape(o.type||"Error");r.exception_message=j.escape(o.message||"Unknown error.");r.backtrace_lines=this.generateBacktrace(o).join("");return j.renderXML(r);},generateBacktrace:function(l){var k=[],n,m,p,o;l=l||{};if(typeof l.stack!=="string"){try{(0)();}catch(q){l.stack=q.stack;}}o=this.getStackTrace(l);for(m=0;m<o.length;m++){p=o[m].match(this.BACKTRACE_MATCHER);if(p&&this.validBacktraceLine(o[m])){n=p[2].replace(this.ROOT,"[PROJECT_ROOT]");if(m===0&&p[2].match(a.location.href)){k.push('<line method="" file="internal: " number=""/>');}k.push('<line method="'+j.escape(p[1])+'" file="'+j.escape(n)+'" number="'+p[3]+'" />');}}return k;},getStackTrace:function(k){var l,m=d({e:k,guess:false});for(l=0;l<m.length;l++){if(m[l].match(/\:\d+$/)){continue;}if(m[l].indexOf("@")===-1){m[l]+="@unsupported.js";}m[l]+=":0";}return m;},validBacktraceLine:function(k){for(var l=0;l<this.backtrace_filters.length;l++){if(k.match(this.backtrace_filters[l])){return false;}}return true;},generateVariables:function(m){var l,k="";for(l in m){if(m.hasOwnProperty(l)){k+='<var key="'+j.escape(l)+'">'+j.escape(m[l])+"</var>";}}return k;}};c.onerror=function(m,l,k){setTimeout(function(){new i().notify({message:m,stack:"()@"+l+":"+k});},0);return true;};})();})(window,document);